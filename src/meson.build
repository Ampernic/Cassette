vapi_sources = files(
  'config.vapi',
)


cassette_gui_sources = files(
  'main.vala',
  'application.vala',
  'window.vala',
  'utils.vala',
  'pager.vala',
  'authenticator.vala',
  'widgets/playlist_create_button.vala',
  'widgets/player_bar.vala',
  'widgets/playlist_micro.vala',
  'widgets/track_list.vala',
  'widgets/sidebar.vala',
  'widgets/save_stack.vala',
  'widgets/label_button.vala',
  'widgets/custom_button.vala',
  'widgets/like_button.vala',
  'widgets/dislike_button.vala',
  'widgets/playlist_row.vala',
  'widgets/info_marks.vala',
  'widgets/account_info_window.vala',
  'widgets/playlist_choose_window.vala',
  'widgets/play_button/play_button.vala',
  'widgets/play_button/play_button_context.vala',
  'widgets/play_button/play_button_default.vala',
  'widgets/play_button/play_button_action.vala',
  'widgets/play_button/play_button_track.vala',
  'widgets/options_button/track_options_button.vala',
  'widgets/options_button/options_button.vala',
  'widgets/options_button/playlist_options_button.vala',
  'widgets/cover_image.vala',
  'widgets/lyrics_line.vala',
  'widgets/lyrics_panel.vala',
  'widgets/track_detailed.vala',
  'widgets/preferences/custom_pages_preferences.vala',
  'widgets/preferences/cache_deletion_preferences.vala',
  'widgets/preferences/custom_page_preferences.vala',
  'widgets/preferences/preferences_window.vala',
  'widgets/track_rows/track_local_content.vala',
  'widgets/track_rows/track_default_content.vala',
  'widgets/track_rows/track_queue_content.vala',
  'widgets/track_rows/track_placeholder.vala',
  'widgets/views/main_view.vala',
  'widgets/views/with_tracks_view.vala',
  'widgets/views/base_view.vala',
  'widgets/views/root_view.vala',
  'widgets/views/disliked_tracks_view.vala',
  'widgets/views/cachiable_view.vala',
  'widgets/views/playlist_view.vala',
  'widgets/views/playlists_view.vala',
  'widgets/views/cant_show_view.vala',
  'widgets/auth_window/auth_window.vala',
  'widgets/auth_window/phone_entry.vala'
)

cassette_client_sources = files(
  'client/yam_object.vala',
  'client/jsoner.vala',
  'client/utils.vala',
  'client/soup_wrapper.vala',
  'client/mpris.vala',
  'client/logger.vala',
  'client/threader.vala',
  'client/likes_controller.vala',
  'client/talkers/abstract_talker.vala',
  'client/talkers/yam_talker.vala',
  'client/talkers/yaauth_talker.vala',
  'client/player/player.vala',
  'client/player/player_flow.vala',
  'client/player/player_local.vala',
  'client/player/player_track_list.vala',
  'client/cachier/info_db.vala',
  'client/cachier/storager.vala',
  'client/cachier/cachier.vala',
  'client/cachier/controller.vala',
  'client/auth/ya_auth.vala',
  'client/auth/objects/auth/complete_info.vala',
  'client/auth/objects/auth/login_info.vala',
  'client/api/yam_client.vala',
  'client/api/difference_builder.vala',
  'client/api/objects/api_error.vala',
  'client/api/objects/track_heap.vala',
  'client/api/objects/cover.vala',
  'client/api/objects/track_short.vala',
  'client/api/objects/download_info.vala',
  'client/api/objects/account_info/account_info.vala',
  'client/api/objects/account_info/avatar_info.vala',
  'client/api/objects/account_info/passport_phone.vala',
  'client/api/objects/account_info/plus.vala',
  'client/api/objects/account_info/master_hub.vala',
  'client/api/objects/account_info/plus.vala',
  'client/api/objects/account_info/account.vala',
  'client/api/objects/account_info/permissions.vala',
  'client/api/objects/playlist/playlist_recommendations.vala',
  'client/api/objects/playlist/playlist.vala',
  'client/api/objects/playlist/user.vala',
  'client/api/objects/playlist/made_for.vala',
  'client/api/objects/playlist/play_counter.vala',
  'client/api/objects/playlist/playlist_absence.vala',
  'client/api/objects/playlist/case_forms.vala',
  'client/api/objects/playlist/liked_playlist.vala',
  'client/api/objects/album/album.vala',
  'client/api/objects/album/label.vala',
  'client/api/objects/album/volume.vala',
  'client/api/objects/artist/artist.vala',
  'client/api/objects/artist/counts.vala',
  'client/api/objects/artist/ratings.vala',
  'client/api/objects/artist/link.vala',
  'client/api/objects/track/track.vala',
  'client/api/objects/track/lyrics_info.vala',
  'client/api/objects/track/meta_data.vala',
  'client/api/objects/track/chart.vala',
  'client/api/objects/queue/short_queue.vala',
  'client/api/objects/queue/queue.vala',
  'client/api/objects/queue/context.vala',
  'client/api/objects/additional_info/similar_tracks.vala',
  'client/api/objects/additional_info/lyrics.vala',
  'client/api/objects/additional_info/lyrics_major.vala'
)

cassette_sources = [
  vapi_sources,
  cassette_gui_sources,
  cassette_client_sources,
  resources
]

cassette_vala_args = [
  '--target-glib', '2.76',
  '--vapidir', meson.current_source_dir(),
  '--gresources', resource_files
]


cassette_c_args = [
  '-include', 'config.h',
]

executable(
  'cassette',
  cassette_sources,
  include_directories: config_h_dir,
  vala_args: cassette_vala_args,
  c_args: cassette_c_args,
  dependencies: cassette_dependencies,
  install: true,
)